# tAuction 팀 프로젝트 (재능 경매 사이트)

기존 재능 판매 사이트에 경매 요소를 더해 구매자가 재능 가치의 크기를 정하는 차별성을 두는 사이트를 만들었습니다.

#### 커뮤니티 게시판
MVC 패턴으로 프로젝트를 진행하였으며, 게시글 부분은 REST 방식으로 데이터 처리 어노테이션 ResponseBody를 이용하여 데이터를 서버에 전송하는 방식으로 구현하였으며, 게시글 댓글 부분은 RestController를 이용하였습니다.

-게시물 전체 목록 (페이징, 검색)
데이터베이스에서 데이터를 가져올 때 인덱스를 통해 테이블에 접근해 rownum값을 부여하여 데이터를 select했으며, Criteria 객체를 이용해 페이징을 처리를 하였고, MyBatis 동적 태그들을 이용해 검색조건을 추가하였습니다.
GET 방식으로 게시물 번호를 파라미터로 전달하여 페이지를 조회하였습니다.
model을 이용해 list를 담아서 데이터를 전달하였으며, Criteria 객체와 pageDTO 이용해서 페이징 처리를 하였습니다.

-게시물 등록
입력한 값을 model에 담아 값을 전달하였으며 등록시 addFlashAttribute를 이용해 데이터를 일회성으로 전달하게 하였습니다. 
게시글 번호는 insert되기 전에 selectKey의 sequence nextval을 사용하여 자동으로 게시글 번호를 부여하였습니다.

-게시물 삭제, 수정
삭제는 게시글 번호를 RequestParam으로 전달받아 해당 게시글을 삭제하게 하였으며,
수정도 게시글 번호를 RequestParam으로 전달받아 해당 글의 상세데이터를 찾고 변경된 내용으로 update되도록 하였습니다.

-댓글
RestController와 Ajax를 사용하여 데이터만을 전달하는 방식을 사용하여 
Server단에서는 RestController를 사용하여 VIEW가 아닌 REST방식의 DATA 자체를 넘겨주는 방식을 사용하였습니다.
Client단에서는 jsp 파일 호출 없이 Ajax를 이용해서 호출해 사용했는데 JSON.stringify()함수를 사용해 JSON 타입을 String 객체로 변환해서 서버쪽으로 값을 넘겨주었습니다.
게시판 목록보기는 Controller에서 ModelAndView 객체를 이용하여 데이터를 받아와 JSP 페이지에 표현 언어와 JSTL을 이용하여 <c:forEach> 구문을 사용하여 테이블을 구성하도록 하였습니다.

-첨부파일 업로드/다운로드/삭제
첨부파일을 서버에 전송하는 방식은 Ajax를 이용해 첨부파일을 별도로 처리하는 방식을 사용하였습니다.
MultipartFile 타입을 이용해서 여러개 파일을 선택할 수 있게 배열 타입으로 설정하였고, transferTo()를 이용해 파일을 저장할 수 있게 하였습니다.
파일 이름 중복 방지를 위해 UUID를 적용하였습니다.
이미지 파일을 등록할 경우에는 Thumbnailator 라이브러리를 이용해 원본파일은 그대로 저장되고 섬네일 파일이 생성되도록 하였고, 일반 파일의 경우 그냥 파일만 업로드 되게 하였습니다.
첨부 파일 삭제의 경우 데이터베이스에 먼저 삭제한 후 실제 파일이 삭제되도록 하였고, 수정할 경우에도 기존 파일 삭제 후 다시 추가하도록 하였습니다.


#### 실시간 채팅 (Websocket을 이용하여 실시간 채팅을 구현)
TextWebSocketHandler 를 상속받고 소켓 연결, 메시지 발송, 소켓 종료 메소드가 추가된 Handler 클래스를 사용하여 Socket이 동작되게 하였습니다.
로그인된 사용자가 낙찰이 되면 자동으로 판매자와 낙찰자가 채팅을 통해 거래할 수 있게 채팅창이 만들어지도록 하였습니다. 
채팅방과 채팅메시지 테이블을 각 각 만들어 채팅방별로 메시지를 데이터베이스에 저장하였으며, 채팅방을 다시 접속하여도 이전의 대화 메시지도 볼 수 있도록 하였습니다.
채팅방에서 메시지는 Ajax를 이용해 메시지 데이터를 받아오게 구현하였습니다.


